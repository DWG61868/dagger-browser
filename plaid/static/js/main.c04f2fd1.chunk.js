(this.webpackJsonpdaglava2=this.webpackJsonpdaglava2||[]).push([[0],{145:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),c=n.n(o),i=(n(63),n(12)),l=n.n(i),s=n(20),u=n(4),m=n(7),d=n(26),h=n(24),p=n(27),g=n(6),f=function e(){Object(u.a)(this,e)};f.Home="/:component?",f.Component="/:component",f.Module="/module/:module",f.GraphModule="/:component/module/:module",f.GraphScope="/:component/scope/:scope",f.GraphNode="/:component/node/:node",f.GraphClosure="/:component/closure/:key",f.SubComponent="/:component/:subcomponent";var v=function e(){Object(u.a)(this,e)};v.Home="/",v.Component=function(e){return"/".concat(encodeURIComponent(e))},v.Module=function(e){return"/module/".concat(encodeURIComponent(e))},v.GraphNode=function(e,t){return"/".concat(encodeURIComponent(e),"/node/").concat(encodeURIComponent(t))},v.GraphModule=function(e,t){return"/".concat(encodeURIComponent(e),"/module/").concat(encodeURIComponent(t))},v.GraphScope=function(e,t){return"/".concat(encodeURIComponent(e),"/scope/").concat(encodeURIComponent(t))},v.GraphClosure=function(e,t){return"/".concat(encodeURIComponent(e),"/closure/").concat(encodeURIComponent(t))},v.SubComponent=function(e,t){return"/".concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t))};var E=v,b=n(34),N={TITLE:b.title||"Graph Browser",REPO_URL:b.repo_url||"",PUBLIC_URL:"http://daggerbrowser.com/plaid",COMPONENTS_MANIFEST_JSON_URL:"http://daggerbrowser.com/plaid/ComponentsManifest.json"},y=function(e){var t=e.link;if(N.REPO_URL){var n=t.split(".").pop();return r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:N.REPO_URL+"/search?q=filename:"+n,className:"unselectable"},r.a.createElement("i",{className:"tiny material-icons"},"open_in_new"))}return r.a.createElement("span",null)},S=n(3),k=n.n(S),M=function(e){switch(e){case"INSTANCE":return{label:"I",color:"deep-purple"};case"PROVIDER":return{label:"P",color:"blue"};case"LAZY":return{label:"L",color:"indigo"};default:return}},w=function(e){var t=e.kind,n=M(t);return n?r.a.createElement("span",{className:k()("node-icon",n.color),title:t||""},n.label):r.a.createElement("span",null)},O=function(e){return e.value>e.largeThreshold?"red":e.value>e.smallThreshold?"orange":"green"},C=function(e){var t=e.weight;return t?r.a.createElement("span",null,t&&t.value>0&&r.a.createElement("span",{className:k()("unselectable","bubble",O(t)),title:t.summary},Number.isInteger(t.value)?t.value:t.value.toFixed(1)," ",t.unit?t.unit:"")):r.a.createElement("span",null)};var I=function(e){var t=e.node,n=e.onSelect,a=e.weight,o=void 0===a?void 0:a,c=e.scoped,i=void 0!==c&&c,l=e.kind,s=t.scope?"[".concat(t.scope.split(".").pop(),"]"):"";return r.a.createElement("div",null,r.a.createElement("div",{className:"binding",onClick:function(){return n&&n(t.key)}},r.a.createElement("div",{className:"text"},r.a.createElement(w,{kind:l||t.kind}),i&&r.a.createElement("span",{className:"light-text"},s,"\xa0"),t.key.replace("java.util.","").replace("java.lang.","").replace("javax.inject.","").replace("io.reactivex.",""),"\xa0"),r.a.createElement("div",null,r.a.createElement(y,{link:t.key}),r.a.createElement(C,{weight:o}))))};var j=function(e){var t=e.subcomponentName,n=e.weight,a=e.onSelect;return r.a.createElement("div",null,r.a.createElement("div",{className:"binding",onClick:function(){return a&&a(t)}},r.a.createElement("div",{className:"text"},function(e){var t=e.lastIndexOf(".");return e.substring(t+1)}(t)),r.a.createElement("div",null,r.a.createElement(C,{weight:n}))))},U=n(5),W=function(e){var t=e.componentName,n=e.weight,a=void 0===n?void 0:n;return r.a.createElement("div",null,r.a.createElement("div",{className:"binding"},r.a.createElement("div",{className:"text"},r.a.createElement(U.b,{to:E.Component(t)},t)),r.a.createElement("div",null,r.a.createElement(y,{link:t}),r.a.createElement(C,{weight:a}))))},_=function(e){var t=e.graphManager,n=e.weightService,a=e.componentName,o=e.onSelect,c=t.getComponent(a),i=Object(g.f)(),l=c.nodes.filter((function(e){return!!e.scope})),s=new Set;c.nodes.filter((function(e){return void 0!=e.component&&e.component!==a})).forEach((function(e){return s.add(e.component)}));var u=c.nodes.filter((function(e){return"MEMBERS_INJECTION"===e.kind})),m=c.nodes.filter((function(e){return"MULTIBOUND_SET"===e.kind||"MULTIBOUND_MAP"===e.kind}));return l.sort((function(e,t){var r=n.getWeight(a,e.key),o=n.getWeight(a,t.key);return(o?o.value:0)-(r?r.value:0)})),m.sort((function(e,t){var r=n.getWeight(a,e.key),o=n.getWeight(a,t.key);return(o?o.value:0)-(r?r.value:0)})),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},r.a.createElement(W,{componentName:a,weight:n.getWeight(a)})),u.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,"Members Injectors:"),u.map((function(e){return r.a.createElement(I,{key:e.key,weight:n.getWeight(a,e.key),scoped:!0,node:e,onSelect:function(e){return o(a,e)}})}))),s.size>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,s.size," Subcomponents:"),Array.from(s).map((function(e){return r.a.createElement(j,{subcomponentName:e,weight:t.getSubcomponentWeight(e),onSelect:function(t){return i.push(E.SubComponent(a,e))}})}))),m.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,m.length," Multibindings:"),m.map((function(e){return r.a.createElement(I,{key:e.key,weight:n.getWeight(a,e.key),scoped:!0,node:e,onSelect:function(e){return o(a,e)}})}))),l.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,l.length," Scoped Bindings:"),l.map((function(e){return r.a.createElement(I,{key:e.key,weight:n.getWeight(a,e.key),scoped:!0,node:e,onSelect:function(e){return o(a,e)}})})))))},R=n(57),T=n(51),x=n.n(T),P=40;var D=function(e){var t=e.graphManager,n=e.weightService,o=e.onSelect,c=e.componentName,i=Object(a.useState)(""),l=Object(R.a)(i,2),s=l[0],u=l[1],m=Object(a.useRef)(null),d=Object(a.useMemo)((function(){return function(e,t,n){return e.getMatches("",n.trim().toLowerCase(),P,!1)}(t,0,s)}),[t,c,s]),h=function(e){if(e&&e.metaKey)return!1;m&&m.current&&m.current.input&&m.current.input.focus()};return Object(a.useEffect)((function(){return h(),window.addEventListener("keydown",h),function(){return window.removeEventListener("keydown",h)}}),[]),r.a.createElement(x.a,{ref:m,suggestions:d,onSuggestionsFetchRequested:function(){},onSuggestionsClearRequested:function(){return u("")},onSuggestionSelected:function(e,t){o(t.suggestion.componentName,t.suggestion.node.key)},getSuggestionValue:function(e){return e.node.key},renderSuggestion:function(e){return r.a.createElement("div",null,r.a.createElement("span",{className:"light-text"},e.componentName?"["+e.componentName.split(".").pop()+"] ":""),e.node.key,r.a.createElement(C,{weight:n.getWeight(e.componentName,e.node.key)}))},inputProps:{value:s,placeholder:"Find dependencies",onChange:function(e,t){u(t.newValue)}}})},L=function(e){var t=e.graphManager,n=e.weightServiceManager,a=t.componentSet.components,o=n.getWeightService();return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Components"),a.map((function(e){return r.a.createElement(W,{componentName:e.name,weight:o.getWeight(e.name)})}))))},B=n(52),z=n(36),G=n.n(z);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var A="",J=function(){function e(){Object(u.a)(this,e),this.manifestUrl=void 0,this.classInfoUrl=void 0,this.componentSet={components:[]},this.classInfo=void 0,this.nodeMap={},this.componentMap={},this.subcomponentWeights={},this.callsitesMap={}}return Object(m.a)(e,[{key:"loadUrl",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.substring(0,t.lastIndexOf("/")+1)+"ClassInfo.json",e.prev=1,e.next=4,G.a.get(n);case 4:a=e.sent,this.classInfo=a.data,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,e.next=13,G.a.get(t);case 13:r=e.sent,this.componentSet=r.data,this.populateCaches(),e.next=21;break;case 18:return e.prev=18,e.t1=e.catch(10),e.abrupt("return",!1);case 21:return this.manifestUrl=t,this.classInfoUrl=n,e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this,[[1,8],[10,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadFile",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.readFileAsync(t);case 2:return n=e.sent,this.componentSet=JSON.parse(n),this.populateCaches(),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readFileAsync",value:function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new FileReader;a.onload=function(){e(a.result)},a.onerror=n,a.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMatches",value:function(e,t,n,a){var r=e?[this.getComponent(e)]:this.componentSet.components,o=[],c=!0,i=!1,l=void 0;try{for(var s,u=r[Symbol.iterator]();!(c=(s=u.next()).done);c=!0){var m=s.value,d=!0,h=!1,p=void 0;try{for(var g,f=m.nodes[Symbol.iterator]();!(d=(g=f.next()).done);d=!0){var v=g.value;if(a?v.key.toLowerCase()==t.toLowerCase()&&o.push({node:v,componentName:m.name}):v.key.toLowerCase().includes(t.toLowerCase())&&o.push({node:v,componentName:m.name}),o.length>=n)return o}}catch(E){h=!0,p=E}finally{try{d||null==f.return||f.return()}finally{if(h)throw p}}}}catch(E){i=!0,l=E}finally{try{c||null==u.return||u.return()}finally{if(i)throw l}}return o}},{key:"getComponent",value:function(e){var t=this.componentMap[e];if(!t)throw Error("Could not find ".concat(e," component"));return t}},{key:"getNode",value:function(e,t){return this.nodeMap[e||A][t]}},{key:"getModule",value:function(e,t){var n=Object.values(this.nodeMap[e]).filter((function(e){return e.module===t}));return{key:t,bindings:n}}},{key:"getScope",value:function(e,t){var n=Object.values(this.nodeMap[e]).filter((function(e){return e.scope===t}));return{scope:t,bindings:n}}},{key:"getCallsites",value:function(e,t){var n=this;return(this.callsitesMap[e][t]||[]).map((function(a){var r=n.getNode(e,a.key);if(!r)return a;var o=r.dependencies.find((function(e){return e.key===t}));return o?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(B.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{kind:o.kind}):a}))}},{key:"getSubcomponentWeight",value:function(e){return this.subcomponentWeights[e]}},{key:"getSubcomponentBindings",value:function(e,t){return Object.values(this.nodeMap[e]).filter((function(e){return e.component===t}))}},{key:"computeNodeWeight",value:function(e,t,n){var a=this.getNode(e,t);return a?this.computeWeightForNodes(e,[a],n):n.result()}},{key:"computeWeightForNodes",value:function(e,t,n){for(var a={};t.length;){var r=t.shift();if(r){n.reduce(r.key),a[r.key]=!0;var o=!0,c=!1,i=void 0;try{for(var l,s=r.dependencies[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;if(!a[u.key])if(this.shouldSkipWeight(e,u.key))a[u.key]=!0;else{n.reduce(u.key);var m=this.getNode(e,u.key);m&&t.push(m),a[u.key]=!0}}}catch(d){c=!0,i=d}finally{try{o||null==s.return||s.return()}finally{if(c)throw i}}}}return n.result()}},{key:"shouldSkipWeight",value:function(e,t){var n=this.getNode(e,t);return n&&"MEMBERS_INJECTION"===n.kind}},{key:"populateCaches",value:function(){var e=this;this.nodeMap[A]={},this.callsitesMap[A]={};var t=!0,n=!1,a=void 0;try{for(var r,o=this.componentSet.components[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var c=r.value;this.nodeMap[c.name]={},this.callsitesMap[c.name]={},this.componentMap[c.name]=c,c.nodes=c.nodes.filter((function(t){return!e.shouldSkipNode(t)}));var i=!0,l=!1,s=void 0;try{for(var u,m=c.nodes[Symbol.iterator]();!(i=(u=m.next()).done);i=!0){var d=u.value;if(this.nodeMap[c.name][d.key]=d,this.nodeMap[A][d.key]=d,d.component&&d.component!=c.name){var h=d.component;this.subcomponentWeights[h]||(this.subcomponentWeights[h]={value:0,smallThreshold:10,largeThreshold:500}),this.subcomponentWeights[h].value++}var p=!0,g=!1,f=void 0;try{for(var v,E=d.dependencies[Symbol.iterator]();!(p=(v=E.next()).done);p=!0){var b=v.value;this.callsitesMap[c.name][b.key]||(this.callsitesMap[c.name][b.key]=[]),this.callsitesMap[A][b.key]||(this.callsitesMap[A][b.key]=[]),this.callsitesMap[c.name][b.key].push(d),this.callsitesMap[A][b.key].push(d)}}catch(N){g=!0,f=N}finally{try{p||null==E.return||E.return()}finally{if(g)throw f}}}}catch(N){l=!0,s=N}finally{try{i||null==m.return||m.return()}finally{if(l)throw s}}}}catch(N){n=!0,a=N}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}}},{key:"shouldSkipNode",value:function(e){return"BOUND_INSTANCE"===e.kind}}]),e}();function V(e){var t=e.componentName,n=e.moduleName,a=e.graphManager,o=e.weightService,c=a.getModule(t,n),i=Object(g.f)();return c?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Module: ",c.key),r.a.createElement("h6",null,"Bindings"),c.bindings.map((function(e){return r.a.createElement(I,{key:e.key,weight:o.getWeight(A,e.key),scoped:!0,node:e,onSelect:function(e){i.push(E.GraphNode(t,e))}})})))):r.a.createElement("div",null,"Cannot find $",c," module in $",t," graph")}var H=n(25);function $(e){var t=e.lastIndexOf(".");return-1===t?e:e.substring(t+1)}var q=function(e){var t=e.componentName,n=e.graphs,a=e.selectGraph,o=n.map((function(e){return{value:e,label:$(e.toString())}})),c=t?{value:t,label:$(t)}:o[0];return r.a.createElement(H.a,{value:c,className:"component-select",classNamePrefix:"react-select",onChange:function(e){return a(e.value)},placeholder:"Select graph...",options:o})};function K(e){var t=e.graphManager,n=e.weightService,a=e.componentName,o=e.nodeName,c=Object(g.f)(),i=t.getNode(a,o);if(!i)return r.a.createElement("div",null,"Cannot find ",r.a.createElement("strong",null,o)," node in ",r.a.createElement("strong",null,a)," graph");var l=i.module,s=t.getMatches("",i.key,40,!0).map((function(e){return e.componentName})),u=t.getCallsites(a,i.key),m=function(e){switch(e){case"PROVISION":return"Module provision";case"INJECTION":return"@Inject constructor";case"DELEGATE":return"@Binds delegate";case"MEMBERS_INJECTION":return"Members Injector";case"COMPONENT":return"Component";case"COMPONENT_DEPENDENCY":return"Component Dependency";case"COMPONENT_PROVISION":return"Component Provision";case"COMPONENT_PRODUCTION":return"Component Production";case"BOUND_INSTANCE":return"Bound instance";case"MULTIBOUND_SET":return"Multibound Set";case"MULTIBOUND_MAP":return"Multibound Map";case"OPTIONAL":return"Optional";case"SUBCOMPONENT_CREATOR":return"Subcomponent Creator"}return e}(i.kind),d=a.substring(a.lastIndexOf(".")+1),h=i.scope&&i.scope.substring(i.scope.lastIndexOf(".")+1),p=function(e,t,n){if(!n.adjacentNodes)return"";var a=!0,r=!1,o=void 0;try{for(var c,i=n.adjacentNodes[Symbol.iterator]();!(a=(c=i.next()).done);a=!0){var l=c.value,s=e.getNode(t,l);if(s&&!s.kind&&l!=t)return l}}catch(u){r=!0,o=u}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return""}(t,a,i);return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},r.a.createElement(I,{node:i,weight:n.getWeight(a,i.key)})),r.a.createElement("p",null,r.a.createElement("span",{className:"unselectable"},"Component: "),1==s.length&&r.a.createElement(U.b,{className:"soft-link",to:E.Component(a)},d),s.length>1&&r.a.createElement(q,{componentName:a,graphs:s,selectGraph:function(e){return c.push(E.GraphNode(e,i.key))}})),i.component&&a!==i.component&&r.a.createElement("p",null,r.a.createElement("span",{className:"unselectable"},"Subcomponent: "),r.a.createElement(U.b,{className:"soft-link",to:E.SubComponent(a,i.component)},i.component)),r.a.createElement("p",null,r.a.createElement("span",null,"Type: "),m,p&&r.a.createElement("span",{className:"unselectable"}," | \xa0",r.a.createElement(U.b,{className:"soft-link",to:E.GraphNode(a,p)},p))),i.scope&&r.a.createElement("p",null,r.a.createElement("span",{className:"unselectable"},"Scope: "),r.a.createElement(U.b,{className:"soft-link",to:E.GraphScope(a,i.scope)},"@",h)),i.module&&r.a.createElement("p",null,r.a.createElement("span",{className:"unselectable"},"Module: "),l?r.a.createElement(U.b,{className:"soft-link",to:E.GraphModule(a,i.module)},l):r.a.createElement("span",null,"n/a")),r.a.createElement("br",null),r.a.createElement("h6",null,"Dependencies \xa0|\xa0",r.a.createElement(U.b,{className:"soft-link",to:E.GraphClosure(a,i.key)},"transitive")),i&&i.dependencies.map((function(e){return{node:t.getNode(a,e.key),dep:e}})).filter((function(e){return void 0!==e.node})).map((function(e){var t=e.node,o=e.dep;return r.a.createElement(I,{key:t.key,weight:n.getWeight(a,t.key),kind:o.kind,scoped:!0,node:t,onSelect:function(e){return c.push(E.GraphNode(a,e))}})})),!i||0===i.dependencies.length&&r.a.createElement("div",null,"None"),r.a.createElement("br",null),r.a.createElement("h6",null,"Callsites"),u.map((function(e){return r.a.createElement(I,{key:e.key,node:e,kind:e.kind,scoped:!0,onSelect:function(e){return c.push(E.GraphNode(a,e))}})})),0===u.length&&r.a.createElement("div",null,"None")))}function Y(e){var t=e.graphManager,n=e.weightService,a=e.componentName,o=e.scope,c=t.getScope(a,o),i=Object(g.f)();return c?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Scope",r.a.createElement("br",null),c.scope),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("h6",null,"Bindings (",c.bindings.length,")"),c.bindings.map((function(e){return r.a.createElement(I,{key:e.key,weight:n.getWeight(A,e.key),scoped:!0,node:e,onSelect:function(e){i.push("/".concat(a,"/node/").concat(e))}})})))))):r.a.createElement("div",null,"Cannot find $",c," module in $",a," graph")}var Z="@";function Q(e){var t=e.graphManager,n=e.componentName,a=e.nodeName,o=function(e,t,n){var a={},r=[n],o={},c={},i={};e.getComponent(t).nodes.forEach((function(e){var t=e.module;t&&(i[t]=(i[t]||0)+1)}));for(;0!=r.length;){var l=r.shift();if(l&&!a[l]){a[l]=!0;var s=e.getNode(t,l);if(s){if(s.module)(c[s.module]||(c[s.module]=[])).push(s);else(o[s.scope||Z]||(o[s.scope||Z]=[])).push(s);s.dependencies.forEach((function(e){r.push(e.key)}))}}}return{bindings:o,modules:c,moduleSummary:i}}(t,n,a),c=Object.keys(o.bindings).filter((function(e){return e!=Z&&"@dagger.Reusable"!=e})),i=Object.keys(o.modules),l=Object(g.f)();return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Transitive Dependencies: ",a),c.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,"Scoped Bindings"),c.map((function(e){return r.a.createElement("div",null,r.a.createElement("p",null,function(e){var t=e.lastIndexOf(".");if(-1===t)return e;return"@"+e.substring(t+1)}(e)),o.bindings[e].map((function(e){return r.a.createElement("div",null,e.key)})))}))),i.length>0&&r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h6",null,"Module Bindings"),i.map((function(e){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(U.b,{className:"soft-link",to:E.GraphModule(n,e)},function(e){var t=e.split(".");if(0==t.length)return e;var n=0;for(;n<t.length&&t[n][0]!==t[n][0].toUpperCase();)n++;if(n<t.length)return t.slice(n,t.length).join(".");return e}(e)),"\xa0 (",o.modules[e].length,"/",o.moduleSummary[e],")"),o.modules[e].map((function(e){return r.a.createElement(I,{key:e.key,node:e,kind:e.kind,scoped:!0,onSelect:function(t){return l.push(E.GraphNode(n,e.key))}})})))})))))}var X=function(e){var t=e.graphManager,n=e.subcomponentName,a=e.componentName,o=e.weightService,c=t.getSubcomponentBindings(a,n),i=Object(g.f)();return c.sort((function(e,t){var n=o.getWeight(a,e.key),r=o.getWeight(a,t.key);return(r?r.value:0)-(n?n.value:0)})),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},n),r.a.createElement("div",null,c.length," total bindings."),r.a.createElement("div",null,c.map((function(e){return r.a.createElement(I,{key:e.key,weight:o.getWeight(a,e.key),kind:e.kind,scoped:!0,node:e,onSelect:function(t){return i.push(E.GraphNode(a,e.key))}})})))))},ee=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).metricOptions=void 0,n.metricOptions=n.props.weightServiceManager.getWeightServiceNames().map((function(e){return{label:e.charAt(0).toUpperCase()+e.slice(1),value:e}})),n.state=n.metricOptions[0],n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(H.a,{className:"component-select weight-select",classNamePrefix:"react-select",value:this.state,onChange:function(t){var n=t;e.setState(n),e.props.onSelectWeight(n.value)},options:this.metricOptions})}}]),t}(r.a.Component),te=(n(98),function(e){var t=e.graphManager,n=e.weightServiceManager,o=e.componentName,c=Object(a.useMemo)((function(){return o&&t.getComponent(o)}),[t,o]),i=Object(g.f)(),l=n.getWeightService(),s=n.getWeightServiceNames().length>1;return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row search-bar"},r.a.createElement("div",{className:k()("col",s?"s9":"s12")},r.a.createElement(D,{graphManager:t,weightService:l,componentName:c&&c.name,onSelect:function(e,t){return i.push(E.GraphNode(e||"",t))}})),s&&r.a.createElement("div",{className:"col s3"},r.a.createElement(ee,{weightServiceManager:n,onSelectWeight:function(e){n.selectWeightService(e),i.replace("#")}}))),r.a.createElement(g.c,null,r.a.createElement(g.a,{path:f.Module,render:function(e){return r.a.createElement(V,{graphManager:t,weightService:l,moduleName:decodeURIComponent(e.match.params.module),componentName:o})}}),r.a.createElement(g.a,{path:f.GraphModule,render:function(e){return r.a.createElement(V,{graphManager:t,weightService:l,moduleName:decodeURIComponent(e.match.params.module),componentName:o})}}),r.a.createElement(g.a,{path:f.GraphScope,render:function(e){return r.a.createElement(Y,{graphManager:t,weightService:l,scope:decodeURIComponent(e.match.params.scope),componentName:o})}}),r.a.createElement(g.a,{path:f.GraphClosure,render:function(e){return r.a.createElement(Q,{graphManager:t,nodeName:decodeURIComponent(e.match.params.key),componentName:o})}}),r.a.createElement(g.a,{path:f.GraphNode,render:function(e){return r.a.createElement(K,{graphManager:t,weightService:l,nodeName:decodeURIComponent(e.match.params.node),componentName:o})}}),r.a.createElement(g.a,{path:f.SubComponent,render:function(e){return r.a.createElement(X,{graphManager:t,subcomponentName:decodeURIComponent(e.match.params.subcomponent),componentName:o,weightService:l})}}),r.a.createElement(g.a,{path:f.Component,render:function(e){return r.a.createElement(_,{componentName:decodeURIComponent(e.match.params.component),graphManager:t,weightService:l,onSelect:function(e,t){return i.push(E.GraphNode(e||"",t))}})}}),r.a.createElement(g.a,{path:"",render:function(e){return r.a.createElement(L,{graphManager:t,weightServiceManager:n})}}))))}),ne=n(53),ae=n.n(ne),re=function(){return r.a.createElement("div",{className:"graph-spinner"},r.a.createElement(ae.a,{size:30,spinnerColor:"#ee6e73",spinnerWidth:3,visible:!0}))},oe=n(19);function ce(e){var t=e.trigger,n=e.onChangeManifestUrl,o=Object(a.useRef)(null);return r.a.createElement(oe.Modal,{actions:[r.a.createElement(oe.Button,{flat:!0,modal:"close",node:"button",waves:"green"},"Close"),r.a.createElement(oe.Button,{modal:"close",className:"waves-effect waves-light red lighten-2",node:"button",onClick:function(){n(o.current.value)}},"Load")],bottomSheet:!1,fixedFooter:!1,header:"Load manifest from URL",id:"modal-0",options:{dismissible:!0,endingTop:"10%",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,opacity:.5,outDuration:250,preventScrolling:!0,startingTop:"4%"},trigger:t},r.a.createElement("form",{className:""},r.a.createElement("input",{ref:o,type:"text",className:"textbox",placeholder:"Enter manifest URL",onKeyDown:function(e){13===e.keyCode&&n(o.current.value)}})))}var ie=function(e){var t=e.loaded,n=e.onChangeManifestUrl;return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},t?r.a.createElement("div",{className:"row search-bar"},r.a.createElement("div",{className:"col s12"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-title"},"Welcome to Dagger Browser"),"Dagger Browser is a simple tool for easily navigating a project's Dagger graph. The graph data is generated by a Dagger SPI plugin and supplied via a JSON manifest file.",r.a.createElement("div",{className:"center-align"},r.a.createElement(ce,{onChangeManifestUrl:n,trigger:r.a.createElement("a",{className:"btn red lighten-2",href:"#"},"Load manifest from URL")})))))):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 center-align"},r.a.createElement(re,null)))))},le=n(55),se=500,ue=10,me=function(){function e(t){Object(u.a)(this,e),this.nodeWeights=void 0,this.graphManager=void 0,this.graphManager=t,this.nodeWeights={}}return Object(m.a)(e,[{key:"getWeight",value:function(e,t){return t?(this.nodeWeights[e]||(this.nodeWeights[e]={}),this.nodeWeights[e][t]||(this.nodeWeights[e][t]=this.graphManager.computeNodeWeight(e,t,new de)),this.nodeWeights[e][t]):{value:this.graphManager.getComponent(e).nodes.length,largeThreshold:se,smallThreshold:ue}}}]),e}(),de=function(){function e(){Object(u.a)(this,e),this.weight=void 0,this.weight={value:0,largeThreshold:se,smallThreshold:ue}}return Object(m.a)(e,[{key:"reduce",value:function(e){this.weight.value++}},{key:"result",value:function(){return this.weight}}]),e}(),he=function(){function e(t){Object(u.a)(this,e),this.classInfo=void 0,this.classInfo=t}return Object(m.a)(e,[{key:"getSummary",value:function(){var e=this.classInfo.size,t="B";return e>=1024&&(e=Math.round(e/1024),t="kB"),"dex size: ".concat(e," ").concat(t)+"\nmethods: ".concat(this.classInfo.method_count)+(this.classInfo.lambda_count?"\nlambdas: ".concat(this.classInfo.lambda_count):"")+"\nfields: ".concat(this.classInfo.field_count)+(this.classInfo.inner_class_count?"\ninner classes: ".concat(this.classInfo.inner_class_count):"")}},{key:"getMemorySize",value:function(){return this.classInfo.size+60*this.classInfo.method_count+30*this.classInfo.field_count}},{key:"add",value:function(e){if(this.classInfo.method_count+=e.classInfo.method_count,e.classInfo.lambda_count){var t=this.classInfo.lambda_count||0;this.classInfo.lambda_count=t+e.classInfo.lambda_count}if(this.classInfo.field_count+=e.classInfo.field_count,this.classInfo.size+=e.classInfo.size,e.classInfo.inner_class_count){var n=this.classInfo.inner_class_count||0;this.classInfo.inner_class_count=n+e.classInfo.inner_class_count}}}]),e}(),pe=function(){function e(t){Object(u.a)(this,e),this.classInfo=void 0,this.classInfo=t}return Object(m.a)(e,[{key:"getWeight",value:function(e,t){var n=this.getClassSize(t||e);if(n){var a=n.getMemorySize()/1024;return a>1&&(a=Math.round(a)),{value:a,largeThreshold:20,smallThreshold:3,summary:n.getSummary(),unit:"kB"}}}},{key:"getClassSize",value:function(e){var t=this.classInfo[e];if(t)return new he(t)}}]),e}(),ge=function(){function e(t,n){Object(u.a)(this,e),this.nodeWeights=void 0,this.graphManager=void 0,this.classSizeService=void 0,this.graphManager=t,this.classSizeService=n,this.nodeWeights={}}return Object(m.a)(e,[{key:"getWeight",value:function(e,t){if(this.nodeWeights[e]||(this.nodeWeights[e]={}),t){if(!this.nodeWeights[e][t]){var n=new fe(this.classSizeService,t);this.nodeWeights[e][t]=this.graphManager.computeNodeWeight(e,t,n)}return this.nodeWeights[e][t]}if(!this.nodeWeights[e][e]){var a=Object.assign([],this.graphManager.getComponent(e).nodes),r=new fe(this.classSizeService,e);this.nodeWeights[e][e]=this.graphManager.computeWeightForNodes(e,a,r)}return this.nodeWeights[e][e]}}]),e}(),fe=function(){function e(t,n){Object(u.a)(this,e),this.classSize=void 0,this.classSizeService=void 0,this.reduced=void 0,this.classSizeService=t,this.reduced=new Set;this.classSize=new he({field_count:0,method_count:0,lambda_count:0,size:0,inner_class_count:0});var a=this.classSizeService.getClassSize(n);a&&this.classSize.add(a)}return Object(m.a)(e,[{key:"reduce",value:function(e){if(!this.reduced.has(e)){this.reduced.add(e);var t=this.classSizeService.getClassSize(e);t&&this.classSize.add(t)}}},{key:"result",value:function(){return{value:Math.round(this.classSize.getMemorySize()/1024),largeThreshold:1e3,smallThreshold:50,summary:this.classSize.getSummary(),unit:"kB"}}}]),e}(),ve=function(){function e(t){if(Object(u.a)(this,e),this.weightServices=void 0,this.weightService=void 0,this.weightServices={},this.weightService=this.weightServices.bindings=new me(t),t.classInfo&&Object.keys(t.classInfo).length){var n=new pe(t.classInfo);this.weightServices["class memory"]=n,this.weightServices["graph memory"]=new ge(t,n)}}return Object(m.a)(e,[{key:"getWeightServiceNames",value:function(){return Object.keys(this.weightServices).sort()}},{key:"getWeightService",value:function(){return this.weightService}},{key:"selectWeightService",value:function(e){this.weightService=this.weightServices[e]}}]),e}();function Ee(e){var t=e.manifestUrl,n=e.onChangeManifestUrl;return r.a.createElement("nav",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement(U.b,{to:E.Home,className:"brand-logo"},N.TITLE),t&&r.a.createElement("div",{className:"right hide-on-med-and-down"},r.a.createElement(oe.Dropdown,{options:{alignment:"right",autoTrigger:!0,closeOnClick:!0,constrainWidth:!1,container:null,coverTrigger:!1,hover:!1,inDuration:150,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:250},trigger:r.a.createElement("a",{href:"#!"},r.a.createElement(oe.Icon,{right:!0},"settings"))},r.a.createElement(ce,{onChangeManifestUrl:n,trigger:r.a.createElement("a",{href:"#"},"Load manifest from URL")}),r.a.createElement("a",{href:t,target:"_blank",title:"Download JSON"},"Download manifest"))))))}var be=n(56),Ne=function(e){e.manifestUrl;var t=e.onFilesSelected,n=e.children,o=Object(a.useCallback)(t,[]),c=Object(be.a)({onDrop:o}),i=c.getRootProps,l=(c.getInputProps,c.isDragActive);return r.a.createElement("div",i(),l?r.a.createElement("div",null,n,r.a.createElement("div",{className:"full-screen-alert"},r.a.createElement("p",null,"Drop to load manifest..."))):n)},ye=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).graphManager=new J,n.state={manifestUrl:N.COMPONENTS_MANIFEST_JSON_URL,loadedManifest:!1},n}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(){this.refresh()}},{key:"refresh",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.loadedManifest){e.next=13;break}if(!this.state.manifestFile){e.next=8;break}return e.next=4,this.graphManager.loadFile(this.state.manifestFile);case 4:t=e.sent,this.setState({weightServiceManager:t?new ve(this.graphManager):void 0,loadedManifest:!0}),e.next=13;break;case 8:if(!this.state.manifestUrl){e.next=13;break}return e.next=11,this.graphManager.loadUrl(this.state.manifestUrl);case 11:n=e.sent,this.setState({weightServiceManager:n?new ve(this.graphManager):void 0,loadedManifest:!0});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeManifestUrl",value:function(e){this.setState({manifestUrl:e,loadedManifest:!1})}},{key:"onChangeManifestFile",value:function(e){if(1===e.length){var t=e[0];"application/json"==t.type?this.setState({manifestFile:t,loadedManifest:!1}):alert("Manifest must be a json file")}else alert("Upload a single ComponentsManifest.json")}},{key:"render",value:function(){var e=this;return r.a.createElement(U.a,null,r.a.createElement(le.a,{ReactRouterRoute:g.a},r.a.createElement(g.a,{path:f.Home,render:function(t){return r.a.createElement(Ne,{onFilesSelected:function(t){return e.onChangeManifestFile(t)}},r.a.createElement("div",null,r.a.createElement(Ee,{manifestUrl:e.graphManager.manifestUrl,onChangeManifestUrl:function(t){return e.onChangeManifestUrl(t)}}),e.state.weightServiceManager?r.a.createElement(te,{componentName:t.match.params.component?decodeURIComponent(t.match.params.component):"",graphManager:e.graphManager,weightServiceManager:e.state.weightServiceManager}):r.a.createElement(ie,{loaded:e.state.loadedManifest,onChangeManifestUrl:function(t){return e.onChangeManifestUrl(t)}})))}})))}}]),t}(r.a.Component);c.a.render(r.a.createElement(ye,null),document.getElementById("root"))},34:function(e){e.exports=JSON.parse('{"title":"Plaid Dagger Browser","repo_url":"https://github.com/android/plaid"}')},58:function(e,t,n){e.exports=n(145)},63:function(e,t,n){},98:function(e,t,n){}},[[58,1,2]]]);
//# sourceMappingURL=main.c04f2fd1.chunk.js.map